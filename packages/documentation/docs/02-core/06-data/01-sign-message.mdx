---
id: sign-message
sidebar_label: signMessage
slug: /core/data/sign-message
title: signMessage
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<!-- components -->
import SectionBreak from '@site/src/components/SectionBreak';

<!-- constants -->
import { BASE_58_SPECIFICATION_URL, CAIP_002_SPECIFICATION_URL } from '@site/src/constants';

# signMessage

> Signs a message or some arbitrary bytes using the appropriate account and chain.

:::note

Authentication is **REQUIRED**.

:::

<SectionBreak />

## Usage

<Tabs
  defaultValue="avm"
  values={[
    { label: 'AVM', value: 'avm' },
  ]}>
  <TabItem value="avm">

    ```typescript
    import { Voi } from '@kibisis/chains';
    import { base58, utf8 } from '@kibisis/encoding';
    import { createKatavault } from '@kibisis/katavault-core';
    import { encodeAddress, verifyBytes } from 'algosdk';

    const accountKey = 'FJ4XvAApLhdvYFd2umNSsb87KE6rpuXQcfptb8WZ9Feo';
    const katavault = await createKatavault({
      chains: [Voi],
    });
    const message = 'hello humie!';
    let signature: Uint8Array;

    await katavault.authenticate();

    signature = await katavault.signMessage({
      accountKey,
      chainID: 'avm:r20fSQI8gWe_kFZziNonSPCXLwcQmH_n',
      message,
    });

    console.log('verified:', verifyBytes(
      utf8.decode(message),
      signature,
      encodeAddress(base58.decode(accountKey)),
    );
    /*
    verified: true
    */
    ```

  </TabItem>
</Tabs>

<SectionBreak />

## Parameters

### params

* Type: [`SignMessageParameters`](04-glossary/02-types.mdx#signmessageparameters)

### params.accountKey

* Type: `string`

The <a href={BASE_58_SPECIFICATION_URL} rel="noopener noreferrer" target="_blank">base58</a> public key of the account that will be used for signing.

### params.chainID

* Type: `string`

The <a href={CAIP_002_SPECIFICATION_URL} rel="noopener noreferrer" target="_blank">CAIP-002</a> chain ID.

### params.encoding

* Required: **no**
* Type: `base64` | `hex`

The output encoding of the signature. If no encoding is specified, the signature will be as raw bytes (`Uint8Array`).

### params.message

* Type: `string` | `Uint8Array`

A UTF-8 encoded message or raw bytes (`Uint8Array`) to sign.

<SectionBreak />

## Returns

`Promise<string | Uint8Array>`

A promise that resolves to the signature of the signed message.

If the encoding parameter was specified, the signature will be encoded in that format, otherwise the signature will be in raw bytes.

## Throws

### [NotAuthenticatedError](04-glossary/03-errors.mdx#notauthenticatederror)

If Katavault has not been authenticated.

### [ChainNotSupportedError](04-glossary/03-errors.mdx#chainnotsupportederror)

If the specified chain is not supported.

### [AccountDoesNotExistError](04-glossary/03-errors.mdx#accountdoesnotexisterror)

If the specified address does not exist in the vault.

### [AuthenticationMethodNotSupportedError](04-glossary/03-errors.mdx#authenticationmethodnotsupportederror)

If the authentication method is not supported.

### [DecryptionError](04-glossary/03-errors.mdx#decryptionerror)

If there was an issue with decryption, or if the key was encrypted with the incorrect credentials.
