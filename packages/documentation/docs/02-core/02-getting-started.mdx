---
sidebar_label: Getting started
slug: /core/getting-started
title: Getting started
---

import SectionBreak from '@site/src/components/SectionBreak';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<!-- components -->
import CenteredImage from '@site/src/components/CenteredImage';

<!-- images -->
import authenticate001Image from './images/authenticate_001.png';
import authenticate002Image from './images/authenticate_002.png';
import authenticate003Image from './images/authenticate_003.png';

# Getting started

> Katavault can be started simply with a few lines of code.

<SectionBreak />

## Overview

The core implementation contains the main functionality that handles all the authentication, encryption and storage of accounts.

<SectionBreak />

## Quick start

### 1. Set up Katavault

Configure the Katavault client.

:::info

While not a requirement, it is **RECOMMENDED** to use [`@kibisis/chains`](https://www.npmjs.com/package/%40kibisis/chains) to handle the chain configuration.

:::

<Tabs
  defaultValue="main"
  values={[
    { label: 'main.ts', value: 'main' },
  ]}>
  <TabItem value="main">

    ```typescript
    import { Algorand, Voi } from '@kibisis/chains';
    import { createKatavault } from '@kibisis/katavault-core';

    const katavault = await createKatavault({
      chains: [Algorand, Voi],
    });
    ```

  </TabItem>
</Tabs>

:::note

See [`CreateKatavaultParameters`](04-glossary/02-types.mdx#createkatavaultparameters) for information on the available parameters.

:::

### 2. Authentication

Katavault offers a variety of authentication methods, including:

* **Password** — A more traditional approach and more widely supported.
* **Passkey** — Biometric or passkey-based login based on the [WebAuthn](https://developer.mozilla.org/en-US/docs/Web/API/Web_Authentication_API) standard and uses the [PRF extension][prf_extension] to extract encryption key material that can be used with strong AES-GCM data encryption.

The choice of authentication method comes down to either support or to the prerogative of the integration.

:::note

Authentication using one of the below flows is **REQUIRED** for all interactions with sensitive (private keys) information — including write operations, such as signing.

:::

#### 2.1. User authentication

The Katavault toolkit comes bundled with a user interface that allows authentication to be taken care of via the Katavault UI.

To initialize the user authentication flow, use:

<Tabs
  defaultValue="main"
  values={[
    { label: 'main.ts', value: 'main' },
  ]}>
  <TabItem value="main">

    ```typescript
    // opens a modal for the user to authenticate
    await katavault.authenticate();


    console.log(`is authenticated: ${katavault.isAuthenticated()}`);
    /*
    is authenticated: true
    */
    ```

  </TabItem>
</Tabs>

A modal will display over the dApp prompting the user to authenticate by first entering a username/email.

<CenteredImage
  label="A screenshot showing the username/email entry of the user authentication flow."
  src={authenticate001Image}
/>

If this is the first time the user has used Katavault on the dApp, they will be prompted to choose their authentication method.

<CenteredImage
  label="A screenshot showing the username/email entry of the user authentication flow."
  src={authenticate002Image}
/>

However, if the user has previously logged in to Katavault on this device, they will be asked for their credentials once more.

<CenteredImage
  label="A screenshot showing the username/email entry of the user authentication flow."
  src={authenticate003Image}
/>

#### 2.2. Authentication API

If the dApp has its own authentication process, Katavault also offers the ability to authenticate programmatically through the API.

#### 2.2.1. Passkey authentication

<Tabs
  defaultValue="main"
  values={[
    { label: 'main.ts', value: 'main' },
  ]}>
  <TabItem value="main">

    ```typescript
    await katavault.authenticateWithPasskey({
      user: {
        displayName: 'Kibi', // optional
        username: 'kibi@kibis.is',
      },
    });

    console.log(`is authenticated: ${katavault.isAuthenticated()}`);
    /*
    is authenticated: true
    */
    ```

  </TabItem>
</Tabs>

:::note

See [`AuthenticateWithPasskeyParameters`](04-glossary/02-types.mdx#authenticatewithpasskeyparameters) for information on the available parameters.

:::

If this is the first time the user has used Katavault, they will be prompted to "register" a passkey. Under the hood, this is essentially calling [`navigator.credentials.create()`](https://developer.mozilla.org/en-US/docs/Web/API/CredentialsContainer/create).

Once the user has successfully registered the passkey, they will need to "authenticate" the passkey to extract the key material, which is used to derive an encryption key. Similar to above, under the hood this is essentially calling [`navigator.credentials.get()`](https://developer.mozilla.org/en-US/docs/Web/API/CredentialsContainer/get).

:::warning

If passkeys are not supported, or the supplied passkey does not support the [PRF extension][prf_extension], a [PasskeyNotSupportedError](04-glossary/03-errors.mdx#passkeynotsupportederror) error will be thrown.

:::

#### 2.2.2. Password authentication

<Tabs
  defaultValue="main"
  values={[
    { label: 'main.ts', value: 'main' },
  ]}>
  <TabItem value="main">

    ```typescript
    await katavault.authenticateWithPassword({
      password: 'mtr*tpv!cbg@dhn9RFH',
      user: {
        displayName: 'Kibi', // optional
        username: 'kibi@kibis.is',
      },
    });

    console.log(`is authenticated: ${katavault.isAuthenticated()}`);
    /*
    is authenticated: true
    */
    ```

  </TabItem>
</Tabs>

:::note

If Katavault was previously initialized with a password, and the supplied password does not match the saved one a [InvalidPasswordError](04-glossary/03-errors.mdx#invalidpassworderror) error will be thrown.

:::

:::note

See [`AuthenticateWithPasswordParameters`](04-glossary/02-types.mdx#authenticatewithpasswordparameters) for information on the available parameters.

:::

### 3. Using Katavault

Once the client is set up and authenticated, you can start interacting with Katavault.

<Tabs
  defaultValue="main"
  values={[
    { label: 'main.ts', value: 'main' },
  ]}>
  <TabItem value="main">

    ```typescript
    accounts = await katavault.accounts();

    console.log(accounts);
    /*
    [
      {
        key: 'FJ4XvAApLhdvYFd2umNSsb87KE6rpuXQcfptb8WZ9Feo',
        name: 'Account-1',
      },
      {
        key: 'CZepAkxcz4KEruVyrURwGFh8SEkKLFL8nASuXmS2Zu3a',
        name: 'Account-2',
      },
    ]
    */
    ```

  </TabItem>
</Tabs>

<!-- links -->
[prf_extension]: https://github.com/w3c/webauthn/wiki/Explainer:-PRF-extension
